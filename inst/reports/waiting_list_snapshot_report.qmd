---
title: "Waiting List Snapshot Report"
format: 
  html:
    toc: true
    embed-resources: true
    smooth-scroll: true
    grid:
      body-width: 900px
    theme: 
      - cosmo

params:
  data_path: "default.rds"
  org_name: "Default Org Name"
  report_reference: "REF001"
  report_owner: "Default Analyst"
---

```{r}
#| message: false
#| warning: true
#| include: false

# load the package when in the development context
# the package will already be loaded when in production
if (requireNamespace("devtools", quietly = TRUE)) {
  try(devtools::load_all("."), silent = TRUE)
}

# Load the data from the RDS path
df <- readRDS(params$data_path)

```

```{r}
#| message: false
#| warning: false
#| include: false

overall_queue_size <- NHSRwaitinglist::wl_queue_size_hist(df) |> 
  format(big.mark = ",", scientific = FALSE)

```

## `r params$org_name`

Report Ref: `r params$report_reference`  
Report Owner: `r params$report_owner`  
Report creation time: `r format(Sys.time(), "%Y-%m-%d %H:%M:%S")`  

---

There are `r overall_queue_size` patients in the waiting list.

